<!DOCTYPE html>
<html>
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/style.css">

		<link rel="stylesheet"
		      href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css"
		      integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU"
		      crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		        integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
		        crossorigin="anonymous"></script>

		<script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"
		        integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD"
		        crossorigin="anonymous"></script>

		<script defer src="js/chess.js"></script>


	    <script src="https://d3js.org/d3.v6.min.js"></script>
  	</head>
	<body>
		<h1>Your Check Mate</h1>
		<h2>How Good is Your Chess Opening? <a href="writeup.html">Writeup</a></h2>
		<h3>Check out the win/draw rate by ranking for opening chess moves from <a href="https://database.lichess.org/" target="_blank">lichess.org</a>  game data!</h3>
		<div class="filter-container">
			<form>
				<label for="input-rating">Go by Rating!</label><br>
				<input type="number" id="input-rating-low" name="input-rating-low"><br>
				<input type="number" id="input-rating-high" name="input-rating-high"><br>
				<input type="button" value="Submit" onclick="filterByRating()">
			</form>
			<form>
			  <label>
			    Go by Date
			    <input type="date" id="start-date" name="start-date">
			    <input type="date" id="end-date" name="end-date">
			    <input type="button" value="Submit" onclick="filterByDate()">
			  </label>
			</form>
		</div>
		<div class="visual-container">
			<div class="board-container">
				<!-- <label>Status:</label> -->
				<div id="status"></div>
				<div class="buttons-container">
					<div id='common-button' ><button class="btn btn-primary" id="commonBtn">Most Common Move</button></div>
					<div class='divider'></div>
					<div id='reset-button' ><button class="btn btn-primary" id="startBtn">Reset Game</button></div>
				</div>
				<div id="myBoard"></div>
				<div class="pgn-string">
					<label><a href="https://en.wikipedia.org/wiki/Portable_Game_Notation" target="_blank">PGN: </a></label>
					<div id="pgn"></div>
				</div>
				<div class="acknowledgements">
					Chessboard powered by <a href="https://chessboardjs.com/">chessboard.js</a> and <a href="https://github.com/jhlywa/chess.js/blob/master/README.md">chess.js</a>.
                </div>
			</div>
			<div class="graph-container">
				<div class="graph-title"><h4>Win/Draw Rates for Chess Opening by Rating for <select id="chessColor"><option value="white" selected>White</option><option value="black">Black</option></select></h4></div>
				<div id='win-graph'>
					<svg id='analysis'>
				    	<g id='draws'></g>
				    	<g id='wins'></g>
				    	<g id='xAxis'></g>
				    	<g id='yAxis'></g>
							<g id='outlines'></g>
							<text x="80" y="245" class='rating-description'>⇦ Amateur</text>
							<text x="380" y="245" class='rating-description'>Expert ⇨</text>
						<text id='xAxisLabel'></text>
						<text id='yAxisLabel'></text>
				    </svg>
				</div>
				<div class ="total-games">
					<label>Total Games:  </label>
					<div id="games"></div>
				</div>
				<div class="acknowledgements">
				    Built following the examples in <a href="https://observablehq.com/@d3/histogram">Histogram | D3 | Observable</a>, and <a href="https://observablehq.com/@d3/stacked-bar-chart">Stacked Bar Chart | D3 | Observable</a>.
				</div>
			</div>
		</div>

		<div id="openings-over-time">

		</div>

  	</body>

	<script defer src="./script.js"></script>

</html>
